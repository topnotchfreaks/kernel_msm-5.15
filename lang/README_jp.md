# kernel_msm-5.15

Redmi Note 12 4G NFC (topaz/tapas) 用のカーネルソースとビルダー

## 概要

このリポジトリには、コードネーム `topaz` および `tapas` の Redmi Note 12 4G NFC モデル用のカーネルソースコードとビルドスクリプトが含まれています。Linux カーネルバージョン 5.15（msm-5.15 ブランチ）をベースにしており、Qualcomm MSM プラットフォーム向けに調整されています。

このプロジェクトは、これらの特定のデバイスモデル用のカーネルをビルド、カスタマイズ、または変更したい開発者、メンテナー、パワーユーザーを対象としています。

## 機能

- **Linux Kernel 5.15:** セキュリティ、パフォーマンス、デバイス互換性を向上させた最新のカーネルベース。
- **デバイス固有サポート:** `topaz` および `tapas` バリアント用のカスタマイズ、デバイスツリー、ドライバー。
- **ビルドスクリプト:** 効率的なビルドプロセスのためのツールとスクリプト。
- **パッチと修正:** デバイスの安定性とパフォーマンスのための重要なパッチの統合。

## GitHub Actions を使用したカーネルのビルド

このリポジトリは GitHub Actions を使用したカーネルのビルドをサポートしており、クラウドでビルドプロセスを自動化します。

### 手順

1. **リポジトリをフォーク**  
   このページの右上にある「Fork」ボタンをクリックして、リポジトリの自分用のコピーを作成します。

2. **ビルドパラメータの設定**  
   - 必要に応じて、ワークフローファイル（通常 `.github/workflows/` にあります）を編集して、デバイスバリアントやコンパイラオプションなどのビルドパラメータをカスタマイズします。
   - リポジトリシークレットを使用して、機密性の高い環境変数を安全に設定することもできます。

3. **ビルドのトリガー**  
   - フォークしたリポジトリの **Actions** タブに移動します。
   - ワークフロー（例：「Kernel Build」）を選択し、**Run workflow** をクリックします。
   - ワークフローが入力をサポートしている場合は、オプションでビルドパラメータを指定します。

4. **完了を待つ**  
   - ビルドプロセスが自動的に開始されます。Actions タブでログと進行状況を監視できます。
   - 完了すると、ビルドされたカーネルとアーティファクト（`Image.gz-dtb` やフラッシュ可能な zip など）が、**Artifacts** の下のワークフロー実行サマリーで利用できるようになります。

5. **アーティファクトのダウンロード**  
   - ワークフローアーティファクトセクションから、ビルドされたカーネルまたはパッケージ化された zip をダウンロードします。

### 注記

- 初回のワークフロー実行前に、フォークで GitHub Actions を有効にする必要がある場合があります。
- エラーやビルド失敗が発生した場合は、トラブルシューティングのためにログを確認してください。
- 高度なカスタマイズについては、`.github/workflows/` の下にあるワークフロー yaml ファイルを編集できます。

## [オプション] Telegram ボット経由での自動ファイル送信

ビルドプロセス後に、ビルドされたカーネルファイルを Telegram ボットを使用して直接 Telegram に送信することを自動化できます。

### 有効化の方法

1. **Telegram ボットの作成**  
   - [@BotFather](https://t.me/BotFather) と話して新しいボットを作成し、`TELEGRAM_BOT_TOKEN` を取得します。

2. **GitHub Secrets の設定**  
   - リポジトリの **Settings** > **Secrets and variables** > **Actions** に移動します。
   - 新しいリポジトリシークレットを追加：
     - 名前: `TELEGRAM_BOT_TOKEN`
     - 値: （Telegram ボット API トークンを入力）

3. **受信者の設定**  
   - Telegram ユーザーまたはグループチャット ID を持つ `TELEGRAM_CHAT_ID` という別のシークレットを追加します。

4. **ワークフロー統合**  
   - GitHub Actions ワークフローに、ボットを使用してアーティファクトを送信するステップ/スクリプトが含まれていることを確認します。  
   - スクリプトの例（curl を使用）:

     ```sh
     curl -F document=@path_to_artifact.zip "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendDocument?chat_id=${{ secrets.TELEGRAM_CHAT_ID }}&caption=カーネルビルド完了！"
     ```

   - `TELEGRAM_BOT_TOKEN` に Telegram ボット API を記入してください。

5. **完了！**  
   - ビルドが成功すると、カーネルファイルが自動的に Telegram チャットに送信されます。

## ライセンス

このリポジトリには、カーネルソースコードとビルダースクリプト/ツールの両方が含まれています。  
**ライセンスは以下の通りです:**

- **カーネルソースコード:**  
  GNU General Public License v2.0 (GPLv2) の下でライセンスされています。詳細については [LICENSE](LICENSE) ファイルを参照してください。

- **ビルダースクリプトと自動化（GitHub Actions を含む）:**  
  GNU General Public License v3.0 (GPLv3) の下でライセンスされています。詳細については [builder/LICENSE](builder/LICENSE) ファイルを参照してください。

## 貢献

貢献を歓迎します！バグ修正、機能強化、またはデバイス固有の改善について、イシューを開くかプルリクエストを送信してください。

## 免責事項

このプロジェクトは上級ユーザーと開発者を対象としています。カスタムカーネルのフラッシュは、デバイスの保証を無効にしたり、意図しない動作を引き起こす可能性があります。注意して進み、常にデータをバックアップしてください。

---

質問、イシュー、またはサポートについては、このリポジトリでイシューを開いてください。